<?xml version='1.0' encoding='ISO-8859-1' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./SegundonaTemplate.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="content">
        <h:form id="frms">
            <p:messages />
                    <p:dialog widgetVar="statusDialog" 
                              modal="true" 
                              draggable="false" 
                              closable="false" 
                              resizable="false" 
                              showHeader="false">
                        
                        <p:graphicImage library="img" 
                                        name="loading.gif" />
                    
                    </p:dialog>
                    
                    
                    <p:dialog header="#{vendaMB.mensagem}" 
                              id="dialog" 
                              widgetVar="dialog" 
                              modal="true" 
                              draggable="false" 
                              closable="true" 
                              resizable="false" 
                              position="center center" 
                              showHeader="true">
                        
                        <h:outputText value="#{vendaMB.mensagem}" />
                        
                    </p:dialog>
        <div id="dv-conteudo">
            <h1>Registrar Venda</h1>
            <div style="background-color: #fff; width: 350px;">  
                <h2>Selecionar</h2>
                <label>Cliente:</label>
                <h:selectOneMenu id="cliente" value="#{vendaMB.idCliente}">
                    <f:selectItems value="#{clienteMB.listar()}" var="cliente" itemLabel="#{cliente.nome}" itemValue="#{cliente.id}" />
                </h:selectOneMenu>
                
                <label>Veículo:</label>
                <h:selectOneMenu id="veiculo" value="#{vendaMB.idVeiculo}">
                    <f:selectItems value="#{veiculoMB.listar()}" var="veiculo" itemLabel="#{veiculo.nome}" itemValue="#{veiculo.id}" />
                </h:selectOneMenu>

                
                <p:spacer height="10px" />
                <br />
                <p:commandButton style="width: 50px;" 
                                        onclick="PF('statusDialog').show()" 
                                         onsuccess="PF('statusDialog').hide();" 
                                         value="Enviar" 
                                         class="btns" 
                                         action="#{vendaMB.salvar()}" update="frms" />       
            </div>
        </div>
        </h:form>
    </ui:define>

</ui:composition>
